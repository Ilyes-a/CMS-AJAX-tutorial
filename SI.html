<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Configuration du SystÃ¨me d'Information (SI)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Configuration et Architecture du SystÃ¨me d'Information (SI)</h1>
  </header>

  <!-- Menu de navigation -->
  <nav>
    <ul>
      <li><a href="index.html">Accueil</a></li>
      <li><a href="wordpress.html">WordPress</a></li>
      <li><a href="joomla.html">Joomla</a></li>
      <li><a href="websitebaker.html">WebsiteBaker</a></li>
      <li><a href="SI.html">SystÃ¨me d'Information</a></li>
    </ul>
  </nav>

  <main>
    <section id="architecture">
      <h2>ğŸ“ Architecture des fichiers</h2>
      <pre><code>CMS-AJAX/
â”œâ”€â”€ API_SYS_INFORMATION/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ login.php
â”‚   â”‚   â”œâ”€â”€ register.php
â”‚   â”‚   â”œâ”€â”€ reserver.php
â”‚   â”‚   â”œâ”€â”€ mon-compte.php
â”‚   â”‚   â”œâ”€â”€ utils.php
â”‚   â”‚   â””â”€â”€ db.php
â”‚   â”œâ”€â”€ spa-php/
â”‚   â”‚   â”œâ”€â”€ login.html / login.js
â”‚   â”‚   â”œâ”€â”€ register.html / register.js
â”‚   â”‚   â”œâ”€â”€ compte.html / mon-compte.js
â”‚   â”‚   â”œâ”€â”€ reservation.html / reservation.js
â”‚   â”‚   â”œâ”€â”€ accueil.html / accueil.js
â”‚   â”‚   â”œâ”€â”€ router.js
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ redirect.php
â””â”€â”€ tennis_reservation.db</code></pre>
    </section>

    <section id="fonctionnement">
      <h2>âš™ï¸ Fonctionnement gÃ©nÃ©ral</h2>
      <ul>
        <li>Les <strong>fichiers PHP</strong> situÃ©s dans <code>/api</code> traitent les appels AJAX (authentification, rÃ©servation, etc.).</li>
        <li>Les <strong>vues HTML</strong> sont dans <code>/spa-php</code> et sont injectÃ©es dans les CMS via fetch.</li>
        <li><code>router.js</code> gÃ¨re dynamiquement les chemins (WordPress: <code>/index.php</code>, WSB: <code>/pages</code>).</li>
        <li><code>redirect.php</code> est un proxy de redirection propre Ã  WSB pour simuler les routes classiques.</li>
      </ul>
    </section>

    <section id="routes">
      <h2>ğŸ§­ Gestion dynamique des routes</h2>
      <h3>ğŸ” redirect.php</h3>
      <pre><code>&lt;?php
$uri = $_SERVER['REQUEST_URI'];
$parts = explode('/', $uri);
$route = end($parts);
header("Location: /pages/$route");
exit;</code></pre>
      <h3>ğŸ“ router.js</h3>
      <pre><code>const ROUTE_PREFIX = (() => {
  const current = window.location.pathname;
  if (current.includes("/pages/")) return "/pages";
  if (current.includes("/index.php/")) return "/index.php";
  return "";
})();</code></pre>
    </section>

    <section id="style">
      <h2>ğŸ¨ Fichier CSS commun</h2>
      <pre><code>const cssHref = "http://192.168.1.77/style.css";
if (!document.querySelector(`link[href="${cssHref}"]`)) {
  const css = document.createElement("link");
  css.rel = "stylesheet";
  css.href = cssHref;
  document.head.appendChild(css);
}</code></pre>
    </section>

    <section id="objectif">
      <h2>ğŸš€ Objectif final</h2>
      <p>Garder le CMS comme simple coquille (blog, menus) et dÃ©lÃ©guer toute la logique mÃ©tier (authentification, rÃ©servation) au SI.</p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Grp ISEN M1. Tous droits rÃ©servÃ©s.</p>
  </footer>
</body>
</html>
